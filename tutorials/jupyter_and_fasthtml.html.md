# Using Jupyter to write FastHTML


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

Writing FastHTML applications in Jupyter notebooks requires a slightly
different process than normal Python applications.

<div>

> **Download this notebook and try it yourself**
>
> The source code for this page is a [Jupyter
> notebook](https://github.com/AnswerDotAI/fasthtml/blob/main/nbs/tutorials/jupyter_and_fasthtml.ipynb).
> That makes it easy to directly experiment with it. However, as this is
> working code that means we have to comment out a few things in order
> for the documentation to build.

</div>

The first step is to import necessary libraries. As using FastHTML
inside a Jupyter notebook is a special case, it remains a special
import.

``` python
from fasthtml.common import *
from fasthtml.jupyter import *
```

Let’s use
[`jupy_app`](https://AnswerDotAI.github.io/fasthtml/api/jupyter.html#jupy_app)
to instantiate `app` and `rt` objects.
[`jupy_app`](https://AnswerDotAI.github.io/fasthtml/api/jupyter.html#jupy_app)
is a thin wrapper around the
[`fast_app`](https://AnswerDotAI.github.io/fasthtml/api/fastapp.html#fast_app)
function.

``` python
app, rt = jupy_app(pico=True)
```

Define a route to test the application.

``` python
@rt
def index():
    return Titled('Hello, Jupyter',
           P('Welcome to the FastHTML + Jupyter example'),
           Button('Click', hx_get='/click', hx_target='#dest'),
           Div(id='dest')
    )
```

Create a `server` object using
[`JupyUvi`](https://AnswerDotAI.github.io/fasthtml/api/jupyter.html#jupyuvi),
which also starts Uvicorn. The `server` runs in a separate thread from
Jupyter, so it can use normal HTTP client functions in a notebook.

``` python
server = JupyUvi(app)
```

The
[`HTMX`](https://AnswerDotAI.github.io/fasthtml/api/jupyter.html#htmx)
callable displays the server’s HTMX application in an iframe which can
be displayed by Jupyter notebook. Pass in the same `port` variable used
in the
[`JupyUvi`](https://AnswerDotAI.github.io/fasthtml/api/jupyter.html#jupyuvi)
callable above.

``` python
# This doesn't display in the docs - uncomment and run it to see it in action
# HTMX()
```

We didn’t define the `/click` route, but that’s fine - we can define (or
change) it any time, and it’s dynamically inserted into the running app.
No need to restart or reload anything!

``` python
@rt
def click(): return P('You clicked me!')
```

When you want to gracefully shut down the server use the `server.stop()`
function displayed below. If you restart Jupyter without calling this
line the thread may not be released and the
[`HTMX`](https://AnswerDotAI.github.io/fasthtml/api/jupyter.html#htmx)
callable above may throw errors. If that happens, a quick temporary fix
is to change the `port` number above to something else.

Cleaner solutions to the dangling thread are to kill the dangling thread
(dependant on each operating system) or restart the computer.

``` python
server.stop()
```
